<!DOCTYPE html>
<html lang="zh">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
  <title>Linuxç¼–å†™C51ç¨‹åº | Jankin&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Jankin Huang">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch:{
      "enable": false,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: 'null'
  };
</script>

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
  <style type="text/css">
    pre,
    code {
      font-family: 'Fira Code', monospace;
    }
    html {
      font-family: sans-serif;
    }
    body {
      font-family: sans-serif;
    }
    h1, h2, h3, h4, h5, figure {
      font-family: sans-serif;
    }
    .menu-container{
      font-family: sans-serif;
    }
  </style>

  <script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
	<script>
	$(document).ready(function(){
	$(".menu-container").jSideMenu({
	    jSidePosition: "position-right",
	    jSideSticky: true,
	    jSideSkin: "greenish",
	     });
	}); 
	</script>
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Jankin's Blog" type="application/atom+xml">
</head>
<body>
<div class="single">

<div id="page">
<div id="lx-aside" style="background-image: url(//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/images/post_cover.jpeg)" data-stellar-background-ratio="0.5">
  <div class="overlay">
  <div class="page-title">
    <div class="avatar"><a href="/"><img src="/images/avatar.jpeg"></a></div>
    <span>2021-01-19</span>
    <h2>Linuxç¼–å†™C51ç¨‹åº</h2>
    <div class="tags"><i class="fa fa-tag"></i><a class="tag-link" href="/tags/C51/" rel="tag">C51</a> <i class="fa fa-tag"></i><a class="tag-link" href="/tags/Development-Environment/" rel="tag">Development Environment</a> <i class="fa fa-tag"></i><a class="tag-link" href="/tags/Linux/" rel="tag">Linux</a></div>
    </div>
</div>
</div>

<div id="lx-main-content">
  <div class="lx-post">
    <div class="lx-entry padding">
      <div>
        <p>è¿‘æœŸï¼Œåœ¨è¯»<code>è®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯</code>è¿™ä¸ªä¹¦ã€‚ä¹‹å‰å°è¯•å’Œå¾ˆå¤šæ¬¡ï¼Œåœ¨å‰é¢ç« èŠ‚å°±æ²¡æœ‰å’‹çœ‹æ‡‚ã€‚å¾ˆå¤šäººéƒ½è¯´è¿™æ˜¯è®¡ç®—æœºç•Œä¸­çš„<code>åœ£ç»</code>ã€‚æœ‰æ—¶é—´é—²ä¸‹æ¥è¯»ä¸€äº›ä¹¦ï¼Œå¯¹äºæˆ‘æ¥è¯´æ˜¯ä¸€ä»¶æ¯”è¾ƒä¼‘é—²çš„äº‹æƒ…ã€‚å¹³æ—¶åŸºæœ¬ä¸Šé¢å¯¹ç”µå­å±å¹•ï¼Œæˆ‘ä¸æƒ³æˆ‘çš„ä¸–ç•Œé‡Œç¦»ä¸å¼€å®ƒã€‚æ‰€ä»¥åœ¨å¾ˆå¤šå¨±ä¹çš„æ—¶å€™ï¼Œæˆ‘éƒ½é€‰æ‹©ä¸€äº›è·Ÿç”µå­è®¾å¤‡ä¸å¤ªç›¸å…³çš„æ´»åŠ¨ã€‚ok,è¿‘æœŸBlogæ›´æ–°ä¹Ÿä¼šæ¯”è¾ƒæ…¢ã€‚Letâ€™s go ğŸŠ</p>
<a id="more"></a>

<p>ä»Šå¤©çš„æ­£é¢˜æ˜¯ï¼Œå¦‚ä½•åœ¨Linuxæ­å»ºå¼€å‘C51çš„å¼€å‘ç¯å¢ƒã€‚å› ä¸ºæˆ‘æ‰‹ä¸Šä¸€ç›´æœ‰ä¸€å—C51çš„å¼€å‘æ¿ã€‚<br><img src="/img/C51.jpg" alt="C51å¼€å‘æ¿"></p>
<h2 id="å®‰è£…SDCC-Small-Device-C-Compiler"><a href="#å®‰è£…SDCC-Small-Device-C-Compiler" class="headerlink" title="å®‰è£…SDCC(Small Device C Compiler)"></a>å®‰è£…SDCC(Small Device C Compiler)</h2><ul>
<li><a href="http://sdcc.sourceforge.net/" target="_blank" rel="noopener">å®˜æ–¹ä»‹ç»</a></li>
</ul>
<blockquote>
<p>SDCC is a retargettable, optimizing Standard C (ANSI C89, ISO C99, ISO C11) compiler suite that targets the Intel MCS51 based microprocessors (8031, 8032, 8051, 8052, etc.), Maxim (formerly Dallas) DS80C390 variants, Freescale (formerly Motorola) HC08 based (hc08, s08), Zilog Z80 based MCUs (z80, z180, gbz80, Rabbit 2000/3000, Rabbit 3000A, TLCS-90), Padauk (pdk14, pdk15) and STMicroelectronics STM8. Work is in progress on supporting the Padauk (pdk13), Microchip PIC16 and PIC18 targets. It can be retargeted for other microprocessors.</p>
</blockquote>
<ul>
<li><p>sdcc ä½¿ç”¨ç¼–è¯‘C51ä»£ç çš„ã€‚</p>
</li>
<li><p>Archç³»åˆ—å®‰è£…å‘½ä»¤</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S sdcc  <span class="comment"># å®‰è£…sdcc</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>å…¶ä»–è¡ç”Ÿç‰ˆå¯ä»¥æŸ¥çœ‹è‡ªå·±çš„è½¯ä»¶ä»“åº“ï¼Œæˆ–è€…è‡ªè¡Œä¸‹è½½</p>
</li>
<li><p><a href="http://sdcc.sourceforge.net/snap.php#Linux" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a></p>
</li>
</ul>
<h2 id="å®‰è£…stcflash"><a href="#å®‰è£…stcflash" class="headerlink" title="å®‰è£…stcflash"></a>å®‰è£…stcflash</h2><ul>
<li><p>ä½¿ç”¨Pythonç¼–å†™ï¼Œç”¨äºçƒ§å…¥sdccç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶</p>
</li>
<li><p>æºç å¼€æºåœ¨Github</p>
</li>
<li><p>Archç³»åˆ—å®‰è£…å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yay -S stcflash-git <span class="comment"># å®‰è£…stcflash åœ¨ç”¨æˆ·ä»“åº“ä¸­ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li><p>å…¶ä»–è¡ç”Ÿç‰ˆå¯ä»¥æŸ¥çœ‹è‡ªå·±çš„è½¯ä»¶ä»“åº“ï¼Œæˆ–è€…è‡ªè¡Œä¸‹è½½ã€‚è§£å‹çš†å¯ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p><code>æ³¨æ„ï¼š</code> å¦‚æœéœ€è¦åœ¨ç»ˆç«¯å¦‚ä½•åœ°æ–¹æ‰“å¼€ï¼Œéœ€è¦æŠŠ<code>stcflash.py</code> å¤åˆ¶åˆ°<code>usr/bin/</code>ç›®å½•ä¸‹é¢ã€‚</p>
<ul>
<li><a href="https://github.com/laborer/stcflash" target="_blank" rel="noopener">stcflash æ›´å¤šä½¿ç”¨è¯´æ˜</a></li>
</ul>
<h2 id="ç¼–å†™C51ä»£ç "><a href="#ç¼–å†™C51ä»£ç " class="headerlink" title="ç¼–å†™C51ä»£ç "></a>ç¼–å†™C51ä»£ç </h2><ul>
<li>éœ€è¦åŒ…å«<code>&lt;mcs51/&gt;8051.h&gt;å¤´æ–‡ä»¶</code>ã€‚</li>
<li>å¼•è„šçš„å®šä¹‰ä¸º<code>P1_0</code>è¡¨ç¤ºä¸º<code>P1 io å£çš„ç¬¬ä¸€ä¸ªå¼•è„š</code> ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;mcs51/8051.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="keyword">for</span>(a=t; a &gt;<span class="number">0</span>;a--)&#123;</span><br><span class="line">        <span class="keyword">for</span>(b=<span class="number">100</span>;b&gt;<span class="number">0</span>;b--);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        P1_0 = <span class="number">0</span>;<span class="comment">//ç›¸å½“äºkeil c51 å®šä¹‰ P1^0</span></span><br><span class="line">        <span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">        P1_0 = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><ul>
<li>ä½¿ç”¨sdccè¿›è¡Œç¼–è¯‘,ç”Ÿæˆ.ihx æ–‡ä»¶ã€‚</li>
<li>ç¼–è¯‘å‘½ä»¤ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sdcc main.c -o main.ihx  <span class="comment"># -o æŒ‡å®šæ–‡ä»¶å</span></span><br></pre></td></tr></table></figure>
å¦‚æœè¯­æ³•æ­£ç¡®ï¼Œå°±èƒ½ç¼–è¯‘æˆåŠŸã€‚å¦åˆ™è¯·æ£€æŸ¥è¯­æ³•ã€‚ğŸ¤</li>
</ul>
<h2 id="è½¬åŒ–"><a href="#è½¬åŒ–" class="headerlink" title="è½¬åŒ–"></a>è½¬åŒ–</h2><ul>
<li>stcflash çƒ§å…¥çš„æ–‡ä»¶æ˜¯<code>.hex</code>ã€‚ æˆ‘ä»¬éœ€è¦è½¬åŒ–<code>.hpx ä¸º .hex</code>ã€‚</li>
<li>è½¬åŒ–å‘½ä»¤<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ packihx main.ihx &gt; main.hex</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="å†™å…¥ç¨‹åº"><a href="#å†™å…¥ç¨‹åº" class="headerlink" title="å†™å…¥ç¨‹åº"></a>å†™å…¥ç¨‹åº</h2><ul>
<li>åˆ©ç”¨stcflash å‘å¼€å‘ç‰ˆçƒ§å…¥<code>.hex</code>ç¨‹åºã€‚</li>
<li>å†™å…¥å‘½ä»¤<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ stcflash main.hex</span><br></pre></td></tr></table></figure>
<h3 id="æ‰©å±•å‘½ä»¤"><a href="#æ‰©å±•å‘½ä»¤" class="headerlink" title="æ‰©å±•å‘½ä»¤"></a>æ‰©å±•å‘½ä»¤</h3><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>â€“port</td>
<td>æŒ‡å®šå†™ä¸²å£</td>
<td><code>$ stcflash --port  /dev/ttyUSB1</code></td>
</tr>
<tr>
<td>-lowbaud 1200</td>
<td>æŒ‡å®šæ³¢ç‰¹ç‡</td>
<td><code>stacflash -lowbaud 1200</code></td>
</tr>
</tbody></table>
</li>
</ul>
<p>æ›´å¤šé…ç½®ä¿¡æ¯ é˜…è¯»<a href="https://github.com/laborer/stcflash" target="_blank" rel="noopener">Github</a></p>
<h2 id="åŠ¨ç”»æ¼”ç¤º"><a href="#åŠ¨ç”»æ¼”ç¤º" class="headerlink" title="åŠ¨ç”»æ¼”ç¤º"></a>åŠ¨ç”»æ¼”ç¤º</h2><ul>
<li>è¯¥åŠ¨ç”»<code>ä¸</code>åŒ…å«<code>sdcc</code>å’Œ<code>stcflash</code>çš„é…ç½®è¿‡ç¨‹ã€‚</li>
<li>ä»…åŒ…å«ä»£ç <code>ç¼–å†™</code>ã€<code>ç¼–è¯‘</code>ã€<code>è½¬åŒ–</code>ã€<code>å†™å…¥</code>ç­‰è¿‡ç¨‹ã€‚<br><img src="/img/c51.gif" alt="ä»£ç ç¼–å†™åŠçƒ§å…¥æ¼”ç¤º"></li>
</ul>

      </div>
    </div>
  </div>
</div>
<div class="lx-navigation">
	<div class="lx-cover prev lx-cover-sm" style="background-image: url(//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/images/footer-l.jpeg)">
		<div class="overlay"></div>
		<a class="copy" href="/2021/02/03/C-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86-%E5%A0%86%E3%80%81%E6%A0%88%E3%80%81RAII/">
			<div class="display-t">
				<div class="display-tc">
					<div>
						<span>Next</span>
						<h3>C++èµ„æºç®¡ç†...</h3>
					</div>
				</div>
			</div>
		</a>
	</div>
        <div class="lx-cover next lx-cover-sm" style="background-image: url(//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/images/footer-r.jpeg)">
		<div class="overlay"></div>
		<a class="copy" href="/2021/01/06/Emulator%E4%B8%8E%E4%B8%BB%E6%9C%BA%E8%BD%AF%E4%BB%B6socket%E9%80%9A%E4%BF%A1/">
			<div class="display-t">
				<div class="display-tc">
					<div>
						<span>Prev</span>
						<h3>Emulato...</h3>
					</div>
				</div>
			</div>
		</a>
	</div>
</div>

</div>

<footer>
  <div>
  Copyright &copy; 2021.<a href="/">Jankin's Blog</a><br>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a><br>
  </div>
</footer>

</div>

<button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
</button> 
<div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="/images/avatar.jpeg" alt="Jankin Huang"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>Jankin Huang</p>
          <span class="tagline">Hello, World!</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
    
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-bookmark fa-fw"></i>é¡µé¢</span>
        <ul>
          <li><a href="/guestbook/">Guestbook</a></li>
        <li><a href="/about/">About</a></li>
        </ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>å‹é“¾</span>
        <ul>
          <li> <a href="https://lx.js.org" target="_blank">Theme-Lx</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

<div class="gototop js-top">
  <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
</div>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
<script>
(function () {
	"use strict";
	var goToTop = function() {
		$(".js-gotop").on("click", function(event){
			event.preventDefault();
			$("html, body").animate({
				scrollTop: $("html").offset().top
			}, 500, "easeInOutExpo");
			return false;
		});
		$(window).scroll(function(){
			var $win = $(window);
			if ($win.scrollTop() > 200) {
				$(".js-top").addClass("active");
			} else {
				$(".js-top").removeClass("active");
			}
		});
	};
	$(function(){
		goToTop();
	});
}());
</script>


</body>
</html>
